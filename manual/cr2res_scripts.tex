\section{Scripts}
\label{sec:scripts}

There also exists a number of scripts, as listed below. Most are for visualization
purposes only. Nevertheless, they can serve as a starting point, for example for
how to open data products for further custom processing and analysis.

They do not perform necessary actions, and are not officially supported
-- please do not make support requests about them, or they might have to be
removed altogether in the future.

The scripts are not part of the RPM or MacPorts packages of the DRS, but are
included in the source-kit, downloadable from
\url{https://www.eso.org/sci/software/pipelines/}. Look for the file
\linebreak\verb!cr2re-X.X.X.tar.gz! within the source kit, and then the subdirectory
\verb!cr2re-X.X.X/tools/! therein.

Most likely you will have to look at the source code for how to use each script.
For the Python scripts, the only dependencies are \texttt{numpy},
\texttt{matplotlib} and \texttt{astropy.io.fits}. Shell scripts use bash-isms
and might or might not run in other shells.\footnote{Note that \texttt{/bin/sh}
is not linked to \texttt{bash} on many modern linux-systems.}

% in cr2rep/tools/
% ls *py | sed s/_/\\\\_/g | awk '//{printf "\\subsection{%s}\n",$1}'

\subsection{cr2res\_show\_raw.py}
Simply show raw (or calibrated) frames as a three-panel-plot. Cuts are chosen automatically unless given as first argument. Plots are saved as PNG-files with the same base name as the input.
\begin{shell}
    %prompt python3 show_raw.py 1,1000 somefile.fits another.fits
\end{shell}

\subsection{cr2res\_show\_trace.py}
Make a plot like Fig.~\ref{fig:flat_trace} by plotting the traces on top of any
frame, raw or otherwise.

\subsection{cr2res\_show\_trace\_curv.py}
Similar to previous, but also plots the slit-tilt in regular intervals. Examples
can be seen in App.~\ref{sec:extrafigs}.

\subsection{cr2res\_update\_wl.py}
Update the wavelength columns in extracted spectra from a TW table.

\subsection{cr2res\_show\_spec\_catal.py}
Plot extracted spectra against a catalog of lines. Also has some key-bindings
to select regions from cursor and re-fit a wavelength solution.

\subsection{cr2res\_plotresiduals.py}
Plot the residuals from line-diagnostics output.

\subsection{cr2res\_drs2molecfit.py}
Convert spectra to MolecFit-format, see Ch.~\ref{sec:molecfit}

\subsection{cr2res\_run\_setting.sh}
Reduce calibrations from a single setting from scratch, as in
Ch.~\ref{sec:calibscratch}. I has hardcoded paths, assumes data is organized in
a certain way and that plotting-scripts are in \verb!$PATH!, so this will not
run for users, but can serve as inspiration.

\subsection{cr2res\_makeSOFS.sh}
Companion script to the previous one, to set up directory structure and SOFs.

\subsection{cr2res\_measure\_lines.py}
\subsection{cr2res\_plot\_obs2d.py}
\subsection{cr2res\_plotfpet.py}
\subsection{cr2res\_plotsolution.py}
\subsection{cr2res\_select\_catalogue.py}
\subsection{cr2res\_show\_wavecal.py}
\subsection{cr2res\_wlen\_table.py}
